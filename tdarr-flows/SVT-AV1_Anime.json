{
  "_id": "svt_av1_anime",
  "name": "SVT-AV1 Anime (Clean Sources)",
  "description": "Optimized for animation with lower CRF (better quality) and film-grain=4 for clean sources. Skips existing AV1.",
  "priority": 0,
  "flowPlugins": [
    {
      "name": "Input File",
      "sourceRepo": "Community",
      "pluginName": "inputFile",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "input_001",
      "position": {"x": 500, "y": 50},
      "inputsDB": {}
    },
    {
      "name": "Skip if AV1",
      "sourceRepo": "Community",
      "pluginName": "checkVideoCodec",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "checkAV1_002",
      "position": {"x": 500, "y": 150},
      "inputsDB": {"codecsToProcess": "av1"}
    },
    {
      "name": "FFmpeg Start (VAAPI Decode)",
      "sourceRepo": "Community",
      "pluginName": "ffmpegCommandStart",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "ffmpegStart_003",
      "position": {"x": 500, "y": 250},
      "inputsDB": {
        "inputArgs": "-hwaccel vaapi -hwaccel_device /dev/dri/renderD128"
      }
    },
    {
      "name": "SVT-AV1 Anime Settings",
      "sourceRepo": "Community",
      "pluginName": "ffmpegCommandCustomArguments",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "customArgs_004",
      "position": {"x": 500, "y": 350},
      "inputsDB": {
        "customArguments": "-map 0 -c:v libsvtav1 -crf 28 -preset 5 -g 240 -pix_fmt yuv420p10le -svtav1-params tune=0:enable-overlays=1:scd=1:film-grain=4 -c:a copy -c:s copy -max_muxing_queue_size 9999"
      }
    },
    {
      "name": "Set Container MKV",
      "sourceRepo": "Community",
      "pluginName": "ffmpegCommandSetContainer",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "setContainer_005",
      "position": {"x": 500, "y": 450},
      "inputsDB": {"container": "mkv"}
    },
    {
      "name": "Execute FFmpeg",
      "sourceRepo": "Community",
      "pluginName": "ffmpegCommandExecute",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "ffmpegExec_006",
      "position": {"x": 500, "y": 550},
      "inputsDB": {}
    },
    {
      "name": "Verify Size Decreased",
      "sourceRepo": "Community",
      "pluginName": "checkFileSize",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "checkSize_007",
      "position": {"x": 500, "y": 650},
      "inputsDB": {
        "greaterThan": "",
        "lessThan": "100"
      }
    },
    {
      "name": "Replace Original",
      "sourceRepo": "Community",
      "pluginName": "replaceOriginalFile",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "replace_008",
      "position": {"x": 650, "y": 750},
      "inputsDB": {}
    },
    {
      "name": "Keep Original",
      "sourceRepo": "Community",
      "pluginName": "keepOriginalFile",
      "version": "1.0.0",
      "fpEnabled": true,
      "id": "keepOrig_009",
      "position": {"x": 350, "y": 750},
      "inputsDB": {}
    }
  ],
  "flowEdges": [
    {"source": "input_001", "sourceHandle": "1", "target": "checkAV1_002", "targetHandle": null, "id": "e01", "animated": true, "type": "smoothstep"},
    {"source": "checkAV1_002", "sourceHandle": "1", "target": "replace_008", "targetHandle": null, "id": "e02", "animated": true, "type": "smoothstep"},
    {"source": "checkAV1_002", "sourceHandle": "2", "target": "ffmpegStart_003", "targetHandle": null, "id": "e03", "animated": true, "type": "smoothstep"},
    {"source": "ffmpegStart_003", "sourceHandle": "1", "target": "customArgs_004", "targetHandle": null, "id": "e04", "animated": true, "type": "smoothstep"},
    {"source": "customArgs_004", "sourceHandle": "1", "target": "setContainer_005", "targetHandle": null, "id": "e05", "animated": true, "type": "smoothstep"},
    {"source": "setContainer_005", "sourceHandle": "1", "target": "ffmpegExec_006", "targetHandle": null, "id": "e06", "animated": true, "type": "smoothstep"},
    {"source": "ffmpegExec_006", "sourceHandle": "1", "target": "checkSize_007", "targetHandle": null, "id": "e07", "animated": true, "type": "smoothstep"},
    {"source": "checkSize_007", "sourceHandle": "1", "target": "replace_008", "targetHandle": null, "id": "e08", "animated": true, "type": "smoothstep"},
    {"source": "checkSize_007", "sourceHandle": "2", "target": "keepOrig_009", "targetHandle": null, "id": "e09", "animated": true, "type": "smoothstep"}
  ],
  "isUiLocked": false
}

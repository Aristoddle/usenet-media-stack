version: "3.9"

services:
  audiobookshelf:
    image: ghcr.io/advplyr/audiobookshelf:latest
    container_name: audiobookshelf
    environment:
      - TZ=Etc/UTC
    volumes:
      - /mnt/fast8tb/Cloud/OneDrive/Books/Audiobooks:/audiobooks
      - /mnt/fast8tb/Cloud/OneDrive/AudiobookshelfConfig:/config
      - /mnt/fast8tb/Cloud/OneDrive/AudiobookshelfConfig/metadata:/metadata
      # Optional: add /podcasts when you decide on a canonical path
      # - /mnt/fast8tb/Cloud/OneDrive/Books/Podcasts:/podcasts
    ports:
      - "13378:80"   # Audiobookshelf web
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.audiobooks.rule=Host(`audio.lan`)"
      - "traefik.http.routers.audiobooks.entrypoints=web"
      - "traefik.http.services.audiobooks.loadbalancer.server.port=80"

networks:
  default:
    name: reading_net

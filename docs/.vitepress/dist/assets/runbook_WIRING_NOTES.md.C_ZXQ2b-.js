import{_ as o,c as r,o as a,a2 as i}from"./chunks/framework.BUjRcKcJ.js";const h=JSON.parse('{"title":"Wiring Notes (2025-12-16)","description":"","frontmatter":{},"headers":[],"relativePath":"runbook/WIRING_NOTES.md","filePath":"runbook/WIRING_NOTES.md","lastUpdated":1765914308000}'),t={name:"runbook/WIRING_NOTES.md"};function d(s,e,l,c,n,p){return a(),r("div",null,e[0]||(e[0]=[i('<h1 id="wiring-notes-2025-12-16" tabindex="-1">Wiring Notes (2025-12-16) <a class="header-anchor" href="#wiring-notes-2025-12-16" aria-label="Permalink to &quot;Wiring Notes (2025-12-16)&quot;">​</a></h1><p><strong>Status:</strong> rclone Comics copy complete. Comics root is <code>/var/mnt/fast8tb/Cloud/OneDrive/Books/Comics</code>; legacy <code>/Comics</code> removed.</p><h2 id="service-endpoints-inside-docker-network" tabindex="-1">Service endpoints (inside Docker network) <a class="header-anchor" href="#service-endpoints-inside-docker-network" aria-label="Permalink to &quot;Service endpoints (inside Docker network)&quot;">​</a></h2><ul><li>Prowlarr: <code>http://prowlarr:9696</code></li><li>Sonarr: <code>http://sonarr:8989</code></li><li>Radarr: <code>http://radarr:7878</code></li><li>Whisparr: <code>http://whisparr:6969</code></li><li>SABnzbd: <code>http://sabnzbd:8080</code></li><li>Traefik: <code>:80/:443</code> (dashboard <code>:8082</code>) — routes pending labels/DOMAIN.</li></ul><h2 id="api-keys-pulled-at-runtime-not-stored-here" tabindex="-1">API keys (pulled at runtime, not stored here) <a class="header-anchor" href="#api-keys-pulled-at-runtime-not-stored-here" aria-label="Permalink to &quot;API keys (pulled at runtime, not stored here)&quot;">​</a></h2><ul><li>Prowlarr/Sonarr/Radarr: read from <code>CONFIG_ROOT/&lt;app&gt;/config.xml</code> → <code>&lt;ApiKey&gt;</code>.</li><li>SABnzbd: read from <code>CONFIG_ROOT/sabnzbd/sabnzbd.ini</code> → <code>api_key</code>.</li></ul><h2 id="api-docs-curl-refs" tabindex="-1">API docs / curl refs <a class="header-anchor" href="#api-docs-curl-refs" aria-label="Permalink to &quot;API docs / curl refs&quot;">​</a></h2><ul><li>Prowlarr API: <a href="https://wiki.servarr.com/prowlarr/api" target="_blank" rel="noreferrer">https://wiki.servarr.com/prowlarr/api</a></li><li>Sonarr API: <a href="https://wiki.servarr.com/sonarr/api" target="_blank" rel="noreferrer">https://wiki.servarr.com/sonarr/api</a></li><li>Radarr API: <a href="https://wiki.servarr.com/radarr/api" target="_blank" rel="noreferrer">https://wiki.servarr.com/radarr/api</a></li><li>Pattern: <code>curl -H &quot;X-Api-Key: $KEY&quot; http://localhost:&lt;port&gt;/api/v3/system/status</code></li></ul><h2 id="prowlarr-wiring" tabindex="-1">Prowlarr wiring <a class="header-anchor" href="#prowlarr-wiring" aria-label="Permalink to &quot;Prowlarr wiring&quot;">​</a></h2><ul><li>Indexers added (Newznab): NZBgeek, NZBFinder, NZB.su, NZBPlanet; Torrents: Nyaa (public).</li><li>Apps: <ul><li>Sonarr: baseUrl <code>http://sonarr:8989</code>, prowlarrUrl <code>http://prowlarr:9696</code>, syncLevel <code>fullSync</code>, categories TV (5000/5070).</li><li>Radarr: baseUrl <code>http://radarr:7878</code>, prowlarrUrl <code>http://prowlarr:9696</code>, syncLevel <code>fullSync</code>, categories Movies (2000).</li><li>Whisparr: baseUrl <code>http://whisparr:6969</code>, prowlarrUrl <code>http://prowlarr:9696</code>, syncLevel <code>fullSync</code>, categories XXX (6000). API key auto-read from container config.</li><li>Mylar: baseUrl <code>http://mylar:8090</code>, prowlarrUrl <code>http://prowlarr:9696</code>, syncLevel <code>fullSync</code>, categories Books/Comics (7030), apiKey set.</li><li>Lidarr: baseUrl <code>http://lidarr:8686</code>, prowlarrUrl <code>http://prowlarr:9696</code>, syncLevel <code>fullSync</code>, categories Music (3000/3030), apiKey set.</li></ul></li><li>Komf: running RW; providers enabled (ComicVine, AniList, MangaUpdates, MangaDex) via env; Komga library <code>/comics</code> currently RW.</li><li>Notes: Tests via <code>/api/v1/indexer/{id}/test</code> require redirect flag and valid appProfileId; current indexers created with <code>redirect=true</code>, <code>appProfileId=1</code>, <code>priority=25</code>.</li></ul><h2 id="sabnzbd-wiring" tabindex="-1">SABnzbd wiring <a class="header-anchor" href="#sabnzbd-wiring" aria-label="Permalink to &quot;SABnzbd wiring&quot;">​</a></h2><ul><li>Categories present: <code>tv</code>, <code>movies</code>, <code>audio</code>, <code>software</code>.</li><li>Sonarr download client: host <code>sabnzbd</code>, port <code>8080</code>, category <code>tv</code>.</li><li>Radarr download client: host <code>sabnzbd</code>, port <code>8080</code>, category <code>movies</code>.</li><li>SAB servers (sabnzbd.ini): Newshosting (30 conns, SSL 563), UsenetExpress (20 conns, priority 1), FrugalUsenet (10 conns, priority 2). Rotate creds later.</li><li>Threads/connections: keep within provider limits (≤30 NH, ≤20 UE, ≤10 Frugal); adjust in sabnzbd.ini or UI.</li></ul><h2 id="transmission-mullvad-vpn-torrents-only" tabindex="-1">Transmission + Mullvad VPN (torrents only) <a class="header-anchor" href="#transmission-mullvad-vpn-torrents-only" aria-label="Permalink to &quot;Transmission + Mullvad VPN (torrents only)&quot;">​</a></h2><ul><li>gluetun + transmission override <code>docker-compose.vpn-mullvad.yml</code> (uses Mullvad OpenVPN with account number only; default city <code>New York City</code>, country <code>United States</code>).</li><li>Env vars required (not committed): <code>MULLVAD_ACCOUNT</code>; optional <code>MULLVAD_COUNTRY</code>, <code>MULLVAD_CITY</code>, <code>MULLVAD_HOSTNAME</code>.</li><li>Ports: host <code>9091</code> → Transmission UI (<code>/transmission/</code>), host <code>51413</code> TCP/UDP.</li><li>Sonarr download client: Transmission host <code>gluetun</code>, port <code>9091</code>, urlBase <code>/transmission/</code>, category <code>tv-sonarr</code>, removeCompleted true.</li><li>Radarr download client: Transmission host <code>gluetun</code>, port <code>9091</code>, urlBase <code>/transmission/</code>, category <code>radarr</code>, removeCompleted true.</li><li>Torrent seeding policy: default Transmission (seed ratio 1.0, time 1440m) still in container config; tune after VPN proved stable.</li><li>Note: removed <code>/gluetun</code> volume to avoid permission issues; gluetun stores transient data in container FS. Downloads directories <code>/home/deck/usenet/downloads/{complete,incomplete,watch}</code> now exist and are owned by UID 1000.</li><li>Secrets: Mullvad account stored in 1Password item “Mullvad”; local untracked env at <code>~/.config/usenet-media-stack/mullvad.env</code> for compose overrides.</li></ul><h2 id="traefik-status" tabindex="-1">Traefik status <a class="header-anchor" href="#traefik-status" aria-label="Permalink to &quot;Traefik status&quot;">​</a></h2><ul><li>Container running (compose + <code>docker-compose.traefik.yml</code>), CF DNS-01 ready with token from 1Password.</li><li>Dashboard exposed on <code>:8082</code> (insecure); routes not yet defined. Needs <code>DOMAIN</code> in <code>.env</code> and service labels.</li></ul><h2 id="validation-script" tabindex="-1">Validation script <a class="header-anchor" href="#validation-script" aria-label="Permalink to &quot;Validation script&quot;">​</a></h2><ul><li><code>scripts/validate-services.py</code> / <code>scripts/validate-services.zsh</code>: fetches API keys from configs, hits local endpoints, exits non-zero on failure; wired to <code>npm test</code>.</li></ul><h2 id="next-actions" tabindex="-1">Next actions <a class="header-anchor" href="#next-actions" aria-label="Permalink to &quot;Next actions&quot;">​</a></h2><ul><li>Ensure all services use <code>/var/mnt/fast8tb/Cloud/OneDrive/Books/Comics</code>; legacy <code>/Comics</code> retired. Repoint Komga/Komf/Mylar and rescan Komga.</li><li>Normalize paths/mount-gating to <code>/var/mnt/fast8tb/{config,downloads,media}</code>; add systemd RequiresMountsFor; restart stack.</li><li>Add Traefik labels + DOMAIN; secure dashboard; verify TLS.</li><li>Run git filter-repo to purge old CF token; add gitleaks/pre-commit; rotate tokens post-scrub.</li><li>Persist wiring snapshots: export redacted Prowlarr indexers/apps JSON and SAB category list after next restart.</li></ul>',20)]))}const m=o(t,[["render",d]]);export{h as __pageData,m as default};

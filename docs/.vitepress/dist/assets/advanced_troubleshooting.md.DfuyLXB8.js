import{_ as o,c as t,o as a,a2 as i}from"./chunks/framework.BUjRcKcJ.js";const m=JSON.parse('{"title":"Troubleshooting Playbook","description":"","frontmatter":{"title":"Troubleshooting Playbook","layout":"doc"},"headers":[],"relativePath":"advanced/troubleshooting.md","filePath":"advanced/troubleshooting.md","lastUpdated":1766041821000}'),s={name:"advanced/troubleshooting.md"};function r(l,e,n,d,c,u){return a(),t("div",null,e[0]||(e[0]=[i('<h1 id="troubleshooting-playbook" tabindex="-1">Troubleshooting Playbook <a class="header-anchor" href="#troubleshooting-playbook" aria-label="Permalink to &quot;Troubleshooting Playbook&quot;">​</a></h1><p>Migrated from <code>codex/collab/troubleshooting.md</code>, this playbook centralises remediation steps for the most common production issues.</p><h2 id="incident-workflow" tabindex="-1">Incident Workflow <a class="header-anchor" href="#incident-workflow" aria-label="Permalink to &quot;Incident Workflow&quot;">​</a></h2><ol><li><strong>Detect</strong>: Use Netdata or <code>./usenet services status</code> to confirm scope.</li><li><strong>Stabilise</strong>: Pause automation jobs and disable affected services to prevent cascading failures.</li><li><strong>Diagnose</strong>: Gather logs, metrics, and configuration diffs.</li><li><strong>Resolve</strong>: Apply fixes and document the outcome in the runbook.</li><li><strong>Retrospective</strong>: Create follow-up actions and schedule validation.</li></ol><h2 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">​</a></h2><h3 id="port-conflicts" tabindex="-1">Port Conflicts <a class="header-anchor" href="#port-conflicts" aria-label="Permalink to &quot;Port Conflicts&quot;">​</a></h3><ul><li>Run <code>./usenet validate --fix</code> to kill stray docker-proxy processes.</li><li>Check <code>docker ps --format &#39;\\\\{\\\\{.Ports\\\\}\\\\} \\\\{\\\\{.Names\\\\}\\\\}&#39;</code> for unexpected binds.</li><li>Reserve ports in <code>/etc/systemd/system.conf</code> when the OS auto-claims them.</li></ul><h3 id="storage-degradation" tabindex="-1">Storage Degradation <a class="header-anchor" href="#storage-degradation" aria-label="Permalink to &quot;Storage Degradation&quot;">​</a></h3><ul><li>Inspect ZFS health with <code>zpool status</code> and run a scrub if errors appear.</li><li>For Btrfs, verify <code>btrfs device stats</code> and replace suspect drives using the hot-swap procedure.</li><li>Ensure <code>udisks2</code> is disabled to prevent desktop environments from mounting pools automatically.</li></ul><h3 id="slow-automation" tabindex="-1">Slow Automation <a class="header-anchor" href="#slow-automation" aria-label="Permalink to &quot;Slow Automation&quot;">​</a></h3><ul><li>Confirm API tokens have not expired by running <code>./usenet env list</code>.</li><li>Review Netdata dashboards for CPU steal or iowait spikes.</li><li>Restart automation containers with <code>./usenet services restart &lt;name&gt;</code>.</li></ul><h3 id="transmission-watch-folder-not-importing" tabindex="-1">Transmission Watch Folder Not Importing <a class="header-anchor" href="#transmission-watch-folder-not-importing" aria-label="Permalink to &quot;Transmission Watch Folder Not Importing&quot;">​</a></h3><ol><li><strong>Confirm settings</strong><ul><li><code>watch-dir-enabled</code> should be <code>true</code>.</li><li><code>watch-dir</code> should match the container path (often <code>/downloads/watch</code>).</li></ul></li><li><strong>Verify volume mapping</strong><ul><li>Ensure the host watch directory is mounted to the expected container path.</li></ul></li><li><strong>Permissions</strong><ul><li>Confirm the container UID/GID can read the watch folder.</li></ul></li><li><strong>Filesystem + inotify</strong><ul><li>Watch folders rely on inotify; some network mounts or GVFS paths can fail.</li><li>Check <code>fs.inotify.max_user_watches</code> if you expect many files.</li></ul></li><li><strong>Dry test</strong><ul><li>Drop a small <code>.torrent</code> into the watch folder and tail logs for import activity.</li></ul></li></ol><h3 id="failed-updates" tabindex="-1">Failed Updates <a class="header-anchor" href="#failed-updates" aria-label="Permalink to &quot;Failed Updates&quot;">​</a></h3><ul><li>Re-run <code>./usenet deploy --auto</code> to reapply Compose templates.</li><li>Inspect <code>docker compose pull</code> output to ensure registries are reachable.</li><li>Roll back to the previous tag stored in <code>docs/advanced/migration-log.md</code>.</li></ul><h2 id="diagnostic-commands" tabindex="-1">Diagnostic Commands <a class="header-anchor" href="#diagnostic-commands" aria-label="Permalink to &quot;Diagnostic Commands&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Scenario</th><th>Command</th></tr></thead><tbody><tr><td>Service health</td><td><code>./usenet services status --verbose</code></td></tr><tr><td>Log tail</td><td><code>./usenet services logs &lt;service&gt; --tail 200</code></td></tr><tr><td>Network capture</td><td><code>./usenet services exec &lt;svc&gt; -- tcpdump ...</code></td></tr><tr><td>Disk benchmarks</td><td><code>fio --filename=/data/test --rw=randrw ...</code></td></tr></tbody></table><h2 id="escalation" tabindex="-1">Escalation <a class="header-anchor" href="#escalation" aria-label="Permalink to &quot;Escalation&quot;">​</a></h2><ul><li>Maintain a contact list for hardware vendors and tunnel providers.</li><li>Use the <code>triage-results.json</code> template to capture evidence for audits.</li><li>Schedule a post-incident review within 48 hours of resolution.</li></ul>',19)]))}const p=o(s,[["render",r]]);export{m as __pageData,p as default};

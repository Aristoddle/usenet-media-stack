import{_ as a,c as i,o as s,a2 as o}from"./chunks/framework.BUjRcKcJ.js";const h=JSON.parse('{"title":"Komics Stack TODO (Komga + OneDrive + optional Kometa)","description":"","frontmatter":{},"headers":[],"relativePath":"TODO-komics-stack.md","filePath":"TODO-komics-stack.md","lastUpdated":1766050220000}'),t={name:"TODO-komics-stack.md"};function n(l,e,r,d,c,p){return s(),i("div",null,e[0]||(e[0]=[o(`<h1 id="komics-stack-todo-komga-onedrive-optional-kometa" tabindex="-1">Komics Stack TODO (Komga + OneDrive + optional Kometa) <a class="header-anchor" href="#komics-stack-todo-komga-onedrive-optional-kometa" aria-label="Permalink to &quot;Komics Stack TODO (Komga + OneDrive + optional Kometa)&quot;">​</a></h1><h2 id="current-state" tabindex="-1">Current state <a class="header-anchor" href="#current-state" aria-label="Permalink to &quot;Current state&quot;">​</a></h2><ul><li>Komga running in Docker (rootful) at <code>http://localhost:8081</code> (maps to internal 25600).</li><li>Komf (Komelia UI) running at <code>http://localhost:8085</code>, linked to Komga.</li><li>Kavita running at <code>http://localhost:5000</code> (official image, library exists).</li><li>Comics root: <code>\${COMICS_ROOT}</code> (example: <code>/var/mnt/fast8tb/Cloud/OneDrive/Books/Comics</code>).</li><li>Docker Engine is active; stack is running via compose (Transmission direct, no VPN).</li></ul><h2 id="immediate-tasks" tabindex="-1">Immediate tasks <a class="header-anchor" href="#immediate-tasks" aria-label="Permalink to &quot;Immediate tasks&quot;">​</a></h2><ul><li>Ensure Komga/Komf/Mylar libraries point to <code>/comics</code>; run a rescan (Komga + Kavita are set; Mylar path set, verify in UI).</li><li>Triage Komga corrupt archives list (<code>/tmp/komga-zip-errors*.txt</code>) and re-download/repair broken CBZs.</li><li>Decide whether to ignore/disable ComicInfo provider noise (missing ComicInfo.xml entries).</li><li>Review <code>config.yml</code> skeleton for Kometa at <code>\${KOMETA_CONFIG}/config.yml</code> and fill Plex token/URL if you plan to run Kometa.</li></ul><h2 id="post-reboot-tasks-docker-needed" tabindex="-1">Post-reboot tasks (Docker needed) <a class="header-anchor" href="#post-reboot-tasks-docker-needed" aria-label="Permalink to &quot;Post-reboot tasks (Docker needed)&quot;">​</a></h2><ul><li>Add Kometa service to compose/swarm (official image recommended):<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kometa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kometateam/kometa:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kometa</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1000:1000&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=Etc/UTC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KOMETA_TIME=03:00</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${COMICS_ROOT}:/media:rw</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${KOMETA_CONFIG}:/config</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li>Note: Kometa is designed for Plex; it cannot manage Komga directly. Kometa is optional for Plex-only use.</li><li>Review healthchecks and storage constraints in compose (Bazarr/Overseerr/Tdarr) when bringing the stack up.</li></ul><h3 id="additional-services-to-add-after-reboot" tabindex="-1">Additional services to add after reboot <a class="header-anchor" href="#additional-services-to-add-after-reboot" aria-label="Permalink to &quot;Additional services to add after reboot&quot;">​</a></h3><ul><li>Audiobookshelf for audiobooks/podcasts; point it at <code>\${AUDIOBOOKS_ROOT}</code> (create after initial sync).</li><li>Ebooks are handled by Kavita in the main compose stack; finalize <code>/Books/Ebooks</code> layout before adding libraries.</li></ul><p>See <code>docker-compose.reading.yml</code> for the Audiobookshelf definition (ports shifted to avoid Komga collisions).</p><h3 id="documentation-improvements-queued" tabindex="-1">Documentation improvements (queued) <a class="header-anchor" href="#documentation-improvements-queued" aria-label="Permalink to &quot;Documentation improvements (queued)&quot;">​</a></h3><ul><li>Add nightly rsync timer templates (done): see <code>scripts/rsync-comics.service</code> and <code>.timer</code>; enable after current transfers.</li></ul><h3 id="documentation-improvements-done" tabindex="-1">Documentation improvements (done) <a class="header-anchor" href="#documentation-improvements-done" aria-label="Permalink to &quot;Documentation improvements (done)&quot;">​</a></h3><ul><li>Nav links for Reading Stack and Komics TODO in <code>docs/.vitepress/config.js</code>.</li><li>OPDS/reading-stack cards in <code>docs/free-media.md</code>.</li><li>Runtime matrix + OneDrive comics callouts in <code>docs/getting-started/installation.md</code> and <code>docs/getting-started/first-deployment.md</code>.</li><li>Storage/Paths table added in <code>docs/architecture/index.md</code> (no separate storage doc).</li><li>Operations Runbook (<code>docs/ops-runbook.md</code>) covering healthchecks, rsync, reboot checklist.</li><li>Secrets/env page for <code>.env</code> (indexer/API keys).</li><li>GVFS/rsync note in <code>docs/advanced/hot-swap.md</code>.</li></ul><h3 id="completed" tabindex="-1">Completed <a class="header-anchor" href="#completed" aria-label="Permalink to &quot;Completed&quot;">​</a></h3><ul><li>Enable Docker: <code>sudo systemctl enable --now docker &amp;&amp; sudo usermod -aG docker $USER &amp;&amp; newgrp docker</code>.</li></ul><h2 id="nice-to-haves" tabindex="-1">Nice-to-haves <a class="header-anchor" href="#nice-to-haves" aria-label="Permalink to &quot;Nice-to-haves&quot;">​</a></h2><ul><li>Create a systemd user timer for nightly rsync from OneDrive → Comics once GVFS stability is confirmed.</li><li>Add Panels/OPDS instructions to docs after Komga library is indexed: Panels URL <code>http://&lt;host&gt;:8081/opds/v1.2</code>.</li><li>Add NZBGeek/Prowlarr keys to <code>.env</code> (gitignored) before starting the Arr services.</li></ul>`,18)]))}const k=a(t,[["render",n]]);export{h as __pageData,k as default};

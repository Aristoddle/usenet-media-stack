import{_ as a,c as n,o,a2 as i}from"./chunks/framework.BUjRcKcJ.js";const m=JSON.parse('{"title":"Custom Configuration Patterns","description":"","frontmatter":{"title":"Custom Configuration Patterns","layout":"doc"},"headers":[],"relativePath":"advanced/custom-configs.md","filePath":"advanced/custom-configs.md","lastUpdated":1766050220000}'),s={name:"advanced/custom-configs.md"};function r(t,e,l,c,d,p){return o(),n("div",null,e[0]||(e[0]=[i(`<h1 id="custom-configuration-patterns" tabindex="-1">Custom Configuration Patterns <a class="header-anchor" href="#custom-configuration-patterns" aria-label="Permalink to &quot;Custom Configuration Patterns&quot;">​</a></h1><p>This reference preserves the original <code>codex/collab/custom-configs.md</code> while aligning examples with the latest configuration layout in <code>config/</code>.</p><h2 id="configuration-philosophy" tabindex="-1">Configuration Philosophy <a class="header-anchor" href="#configuration-philosophy" aria-label="Permalink to &quot;Configuration Philosophy&quot;">​</a></h2><ul><li>Keep vendor defaults intact. Layer overrides through environment files or bind-mounted directories instead of editing upstream templates.</li><li>Document every override in version control; prefer one configuration file per feature flag.</li><li>Test changes with <code>./usenet validate --fix</code> before rolling them into production deployments.</li></ul><h2 id="overlay-structure" tabindex="-1">Overlay Structure <a class="header-anchor" href="#overlay-structure" aria-label="Permalink to &quot;Overlay Structure&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>config/</span></span>
<span class="line"><span>├── overrides/</span></span>
<span class="line"><span>│   ├── plex/</span></span>
<span class="line"><span>│   ├── sonarr/</span></span>
<span class="line"><span>│   └── radarr/</span></span>
<span class="line"><span>├── profiles/</span></span>
<span class="line"><span>│   ├── gpu-accelerated.yml</span></span>
<span class="line"><span>│   └── low-power.yml</span></span>
<span class="line"><span>└── templates/</span></span>
<span class="line"><span>    └── docker-compose.partial.yml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><code>overrides/</code> contains per-service config fragments that mount into the running containers via the CLI.</li><li><code>profiles/</code> defines hardware-specific toggles consumed by the storage and hardware commands.</li><li><code>templates/</code> stores Compose fragments that can be merged during deploys.</li></ul><h2 id="creating-a-new-override" tabindex="-1">Creating a New Override <a class="header-anchor" href="#creating-a-new-override" aria-label="Permalink to &quot;Creating a New Override&quot;">​</a></h2><ol><li>Duplicate a template from <code>config/examples</code> into <code>config/overrides/&lt;service&gt;</code>.</li><li>Document the change inside the directory using <code>README.override.md</code>.</li><li>Register the override via <code>./usenet services enable &lt;service&gt; --override</code>.</li><li>Run <code>./usenet deploy --validate-only</code> to confirm the override merges.</li></ol><h2 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">​</a></h2><ul><li>Store secrets in <code>.env</code> using the <code>usenet env</code> helper. Never commit the file to the repository.</li><li>Use <code>USENET_PROFILE</code> to select hardware profiles dynamically.</li><li>Reference environment variables inside Compose overrides using the <code>\${VARIABLE:?message}</code> syntax so missing values fail fast.</li></ul><h2 id="configuration-promotion-workflow" tabindex="-1">Configuration Promotion Workflow <a class="header-anchor" href="#configuration-promotion-workflow" aria-label="Permalink to &quot;Configuration Promotion Workflow&quot;">​</a></h2><ol><li>Prototype locally and commit changes to a feature branch.</li><li>Run targeted service tests using the scripts in <code>lib/test/integration</code>.</li><li>Submit a pull request documenting the behaviour change and rollback plan.</li><li>After merge, tag the repository so you can map deployments to commits.</li></ol><h2 id="rollback-strategy" tabindex="-1">Rollback Strategy <a class="header-anchor" href="#rollback-strategy" aria-label="Permalink to &quot;Rollback Strategy&quot;">​</a></h2><ul><li>Maintain previous overrides in <code>config/archive/&lt;date&gt;</code>. The CLI can use archived directories as drop-in replacements if a regression appears.</li><li>Use <code>docker compose logs &lt;service&gt;</code> to confirm the restored override resolves the issue before resuming automation.</li></ul>`,15)]))}const h=a(s,[["render",r]]);export{m as __pageData,h as default};
